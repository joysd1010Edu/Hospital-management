<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pay Slip - IST Medical College & Hospital</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50">
  <!-- Navigation -->
  <nav class="bg-white shadow-md sticky top-0 z-50">
    <div class="container mx-auto px-4">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center space-x-3">
          <i class="fas fa-hospital text-blue-600 text-3xl"></i>
          <span class="text-xl font-bold text-blue-800">IST Medical College & Hospital</span>
        </div>
        <div class="hidden md:flex items-center space-x-6">
          <a href="index.html" class="text-gray-700 hover:text-blue-600">Home</a>
          <a href="about.html" class="text-gray-700 hover:text-blue-600">About</a>
          <a href="doctor-list.html" class="text-gray-700 hover:text-blue-600">Doctors</a>
          <a href="appointment.html" class="text-gray-700 hover:text-blue-600">Appointment</a>
          <a href="payslip.html" class="text-blue-600 font-semibold hover:text-blue-800">Pay Slip</a>
          <a href="history.html" class="text-gray-700 hover:text-blue-600">History</a>
          <a href="seat-booking.html" class="text-gray-700 hover:text-blue-600">Seat Booking</a>
          <a href="suggestions.html" class="text-gray-700 hover:text-blue-600">Suggestions</a>
          <a href="login.html" id="loginBtn" class="text-gray-700 hover:text-blue-600">Login</a>
          <a href="signup.html" id="signupBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Sign Up</a>
          <button id="dashboardBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700" style="display:none;">Dashboard</button>
        </div>
        <button class="md:hidden text-gray-700" onclick="toggleMobileMenu()">
          <i class="fas fa-bars text-2xl"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- Page Header -->
  <section class="bg-blue-600 text-white py-16">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl font-bold mb-4">Pay Slips & Invoices</h1>
      <p class="text-xl">View and download your payment records</p>
    </div>
  </section>

  <!-- Content -->
  <section class="py-16">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <div id="invoicesList" class="space-y-4">
          <!-- Invoices will be loaded here -->
        </div>
        
        <div id="noInvoices" class="text-center py-12" style="display: none;">
          <i class="fas fa-file-invoice text-gray-300 text-6xl mb-4"></i>
          <p class="text-gray-600 text-lg">No invoices found</p>
          <p class="text-gray-500 mt-2">Please login to view your invoices</p>
          <a href="login.html" class="inline-block mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">Login</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-blue-900 text-white py-8">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-3 gap-8">
        <div>
          <h3 class="text-xl font-bold mb-4">IST Medical College & Hospital</h3>
          <p class="text-blue-200">Providing quality healthcare services with compassion and excellence.</p>
        </div>
        <div>
          <h3 class="text-xl font-bold mb-4">Quick Links</h3>
          <ul class="space-y-2">
            <li><a href="about.html" class="text-blue-200 hover:text-white">About Us</a></li>
            <li><a href="doctor-list.html" class="text-blue-200 hover:text-white">Our Doctors</a></li>
            <li><a href="appointment.html" class="text-blue-200 hover:text-white">Book Appointment</a></li>
            <li><a href="suggestions.html" class="text-blue-200 hover:text-white">Contact Us</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-xl font-bold mb-4">Contact Info</h3>
          <ul class="space-y-2 text-blue-200">
            <li><i class="fas fa-phone mr-2"></i> +880 1234-567890</li>
            <li><i class="fas fa-envelope mr-2"></i> info@istmedical.com</li>
            <li><i class="fas fa-map-marker-alt mr-2"></i> Dhaka, Bangladesh</li>
          </ul>
        </div>
      </div>
      <div class="border-t border-blue-800 mt-8 pt-6 text-center text-blue-200">
        <p>&copy; 2025 IST Medical College & Hospital. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="js/data.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/invoice.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      updateNavigation();
      loadInvoices();
    });

    function loadInvoices() {
      const invoicesList = document.getElementById('invoicesList');
      const noInvoices = document.getElementById('noInvoices');
      
      if (!isLoggedIn()) {
        invoicesList.style.display = 'none';
        noInvoices.style.display = 'block';
        return;
      }

      const currentUser = getCurrentUser();
      const userType = getUserType();
      let invoices = [];

      if (userType === 'patient') {
        invoices = getPatientInvoices(currentUser.id);
      } else if (userType === 'doctor') {
        invoices = getDoctorInvoices(currentUser.id);
      }

      if (invoices.length === 0) {
        invoicesList.style.display = 'none';
        noInvoices.style.display = 'block';
        noInvoices.innerHTML = `
          <i class="fas fa-file-invoice text-gray-300 text-6xl mb-4"></i>
          <p class="text-gray-600 text-lg">No invoices found</p>
        `;
        return;
      }

      invoicesList.innerHTML = invoices.map(invoice => `
        <div class="bg-white rounded-lg shadow-lg p-6">
          <div class="flex justify-between items-start mb-4">
            <div>
              <h3 class="text-xl font-bold text-blue-800">Invoice ${invoice.id}</h3>
              <p class="text-gray-600">Date: ${formatDate(invoice.date)}</p>
            </div>
            <span class="px-3 py-1 rounded-full text-sm font-semibold ${invoice.paid ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
              ${invoice.paid ? 'Paid' : 'Unpaid'}
            </span>
          </div>
          <div class="grid md:grid-cols-2 gap-4 mb-4">
            <div>
              <p class="text-gray-600"><strong>Patient:</strong> ${invoice.patientName}</p>
              <p class="text-gray-600"><strong>Doctor:</strong> ${invoice.doctorName}</p>
            </div>
            <div>
              <p class="text-gray-600"><strong>Services:</strong> ${invoice.services}</p>
              <p class="text-gray-600"><strong>Amount:</strong> <span class="text-blue-600 font-bold">à§³${invoice.amount.toFixed(2)}</span></p>
            </div>
          </div>
          <div class="flex space-x-2">
            <button onclick="printInvoice('${invoice.id}')" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
              <i class="fas fa-print mr-2"></i>Print
            </button>
            ${!invoice.paid && userType === 'patient' ? `
              <button onclick="markAsPaid('${invoice.id}')" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                <i class="fas fa-check mr-2"></i>Mark as Paid
              </button>
            ` : ''}
          </div>
        </div>
      `).join('');
    }

    function markAsPaid(invoiceId) {
      if (markInvoicePaid(invoiceId)) {
        loadInvoices();
      }
    }
  </script>
</body>
</html>

